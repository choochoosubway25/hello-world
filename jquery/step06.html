<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        div {
            margin : 10px 5px;
        }
        label  {
            display : block;
            margin-bottom: 5px;
        }
        input  {
            width : 100%;
            height : 20px;
            font-size : 1.1em;
        }
        select  {
            width : 100%;
            height : 30px;
            font-size : 1.2em;
        }
        input:focus {
            outline : none;
        }
        
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script>
        jQuery(function(){
            const subObj = jQuery('#joinMember');
            const idObj = jQuery('#id');
            const jobObj = jQuery('#job');
            const emailObj = jQuery('#email');

            idObj.focus();

            idObj.bind('blur',function(){
                if(idObj.val().length >= 1){
                    idObj.css('border-bottom-color','black');
                }
            });

            subObj.bind('click',function(event){     //jQuery 에서 이벤트는 bind를 이용하자
                event.preventDefault();

                if(idObj.val() == ""){  //.val() : jQuery 에서 어떤 변수의 값을 가지고 오는 기능 .value 와 동치
                // "" 이 falsy value 인것을 이용해서, if(!idObj.val()){} 로 대체해 쓸 수 있다.
                    idObj.css("border-bottom-color","red");   /// css 옵션 부여
                    alert("아이디를 입력하세요");
                    idObj.focus();
                    return;
                }
                
                //인덱스 이용 코드 (밑 부분의 주석 처리된 javascript 코드와 동치)
                if(jQuery('#job option').index(jQuery('#job option:selected')) == 0){
                    alert('직업을 선택하세요');
                    jobObj.focus();
                    return;
                }

                //기능은 같으나 좀 더 짧게 쓴 코드. (값을 이용해 비교)
                /* if(jQuery('#job option:selected').val() == ""){
                    alert('직업을 선택하세요');
                    jobObj.focus();
                    return;
                } */

                if(emailObj.val() == ""){
                    alert("이메일을 입력하세요");
                    emailObj.focus();
                    return;
                }

                f.submit();
            
            });

        });

        // 위 코드와 아래코드는 기능과 코드 작성 의도가 서로 동치이다.

        /* window.onload = function(){
            const subObj = document.querySelector("#joinMember");
            const idObj = document.querySelector("#id");
            const jobObj = document.querySelector("#job");
            const emailObj = document.querySelector("#email");
            
            idObj.focus();

            idObj.addEventListener("blur",function(){
                if(idObj.value.length >= 1){
                    idObj.style.borderBottomColor = "black";
                }
            });

            subObj.addEventListener("click",function(event){
                //원래의 기능을 제거한다.
                event.preventDefault();
                
                if(idObj.value == ""){
                    idObj.style.borderBottomColor = "red";
                    alert("아이디를 입력하세요");
                    idObj.focus();
                    // return은 아래의 실행문을 
                    //수행하지말고 중지하라는 의미
                    return; 
                }
                if(jobObj.selectedIndex == 0){
                    alert('직업을 선택하세요');
                    jobObj.focus();
                    return;
                }
                if(emailObj.value == ""){
                    alert("이메일을 입력하세요");
                    emailObj.focus();
                    return;
                }
                
                f.submit();

            });
        }
         */
    </script>
    
    <title>Javascript Validation</title>
</head>
<body>
    <h1>회원가입</h1>
    <form name="f" action="save.html" method="post">
        <div>
            <label for="id">아이디 </label>
            <input type="text" name="id" id="id" 
                placeholder="아이디를 입력하세요">
        </div>
        <div>
            <label for="job">직업</label>
            <select name="job" id="job">
                <option value="">직업을 선택하세요</option>
                <option>선생님</option>
                <option>개발자</option>
                <option>분석가</option>
                <option>기타</option>
            </select>
        </div>
        <div>
            <label for="email">이메일</label>
            <input type="email" name="email" id="email">
        </div>
        <div>
            <button type="submit" id="joinMember">회원가입</button>
            <button type="reset">취소</button>
        </div>
    </form>
</body>
</html>